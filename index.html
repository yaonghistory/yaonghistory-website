<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="format-detection" content="telephone=no,date=no,address=no,email=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>야옹 역사 | 초등 현장 한국사 수업</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <a class="skip" href="#main">본문 바로가기</a>

  <header class="site-header" id="top">
    <div class="wrap header-inner">
      <div class="brand">
        <img class="brand-logo" src="yaong-cat.png" alt="야옹 역사 로고" />
        <div class="brand-text">
          <div class="brand-title">야옹 역사</div>
          <div class="brand-sub">초등 현장 한국사 수업</div>
        </div>
      </div>

      <a class="chip" href="#contact" data-scroll>문의</a>
    </div>
  </header>

  <main id="main">
    <section class="section hero">
      <div class="wrap">
        <div class="pill"><span class="pill-dot">🐾</span>현장형 · 소수정예 · 120분</div>

        <h1 class="hero-title">야옹 역사</h1>
        <div class="hero-sub">초등 현장 한국사 수업</div>
        <p class="hero-copy">교과서 밖에서 직접 보고, 묻고, 배우는<br>살아있는 한국사 수업</p>

        <div class="btn-row">
          <a class="btn btn--wide" href="#about" data-scroll>수업 소개 보기</a>
          <a class="btn btn--wide btn--accent" href="#curriculum" data-scroll>커리큘럼 보기</a>
          <a class="btn btn--wide btn--mint" href="#contact" data-scroll>문의하기</a>
        </div>

        <ul class="stat-list">
          <li class="stat">
            <div class="stat-top">120분</div>
            <div class="stat-bottom">1회 수업</div>
          </li>
          <li class="stat">
            <div class="stat-top">4~5명</div>
            <div class="stat-bottom">소수 정예</div>
          </li>
          <li class="stat">
            <div class="stat-top">현장+이론</div>
            <div class="stat-bottom">유물·전시 병행</div>
          </li>
        </ul>

        <div class="card card--soft">
          <h2 class="card-title">오늘, 역사가 ‘보이는’ 수업</h2>
          <p class="card-lead">‘외우는 역사’가 아니라, 관찰하고 질문하는 역사로 바뀝니다.</p>
          <ul class="bullets">
            <li>초등 눈높이 현장 체험형 수업</li>
            <li>관찰 → 질문 → 기록 → 토론</li>
            <li>주제/장소는 학년·관심사에 맞춤</li>
          </ul>
          <div class="note">※ 일정·장소는 협의 후 조율 가능</div>
        </div>
      </div>
    </section>

    <section class="section" id="about">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">야옹 역사는 이런 수업이에요</h2>
        </div>
        <p class="sec-sub">따뜻하고 친근하지만, 내용은 탄탄하게. 아이와 부모 모두 안심하는 현장 수업.</p>

        <div class="panel">
          <h3 class="panel-title">수업 핵심</h3>
          <ul class="bullets">
            <li>초등 눈높이에 맞춘 현장 체험형 한국사 수업</li>
            <li>암기가 아닌 관찰과 질문 중심</li>
            <li>1회 120분 집중 수업</li>
            <li>4~5명 소수 정예 수업</li>
          </ul>
        </div>

        <div class="panel">
          <h3 class="panel-title">키워드</h3>
          <div class="tag-row">
            <span class="tag">#현장수업</span>
            <span class="tag">#체험형역사</span>
            <span class="tag">#질문하는아이</span>
            <span class="tag">#소수정예</span>
          </div>
          <div class="quote">“아이들이 스스로 발견한 역사는 오래 기억됩니다.”</div>
        </div>
      </div>
    </section>

    <section class="section" id="style">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">수업은 이렇게 진행돼요</h2>
        </div>

        <ol class="steps">
          <li class="step">
            <div class="step-num">1</div>
            <div>
              <div class="step-title">현장 설명 + 이론 학습</div>
              <div class="step-desc">현장에서 바로 이해하고 연결해요.</div>
            </div>
          </li>
          <li class="step">
            <div class="step-num">2</div>
            <div>
              <div class="step-title">유물·전시 관람 병행</div>
              <div class="step-desc">실물을 보며 역사 감각을 키워요.</div>
            </div>
          </li>
          <li class="step">
            <div class="step-num">3</div>
            <div>
              <div class="step-title">관찰하기 · 질문하기 · 기록하기</div>
              <div class="step-desc">‘왜?’를 스스로 만들어가는 수업.</div>
            </div>
          </li>
          <li class="step">
            <div class="step-num">4</div>
            <div>
              <div class="step-title">활동지 및 토론</div>
              <div class="step-desc">정리하고 말로 표현하며 오래 기억해요.</div>
            </div>
          </li>
        </ol>
      </div>
    </section>

    <section class="section" id="locations">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">역사가 있는 모든 곳이 교실입니다</h2>
        </div>

        <ul class="place-list">
          <li>국립중앙박물관 (시대별)</li>
          <li>경복궁 · 덕수궁 · 창경궁</li>
          <li>서대문형무소 · 전쟁기념관</li>
          <li>고궁박물관 · 화폐박물관</li>
          <li>그리스·로마관 · 선정릉</li>
        </ul>

        <div class="place-note">교실을 벗어나, 역사를 직접 만나는 수업</div>
      </div>
    </section>

    <section class="section" id="curriculum">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">시대별로 나누어 배우는 한국사</h2>
        </div>
        <p class="sec-sub">중앙박물관 커리큘럼 예시</p>

        <div class="curr-list">
          <div class="curr">
            <h3 class="curr-title">선사시대</h3>
            <p class="curr-q">“사람들은 어떻게 살았을까?”</p>
          </div>
          <div class="curr">
            <h3 class="curr-title">삼국시대</h3>
            <p class="curr-q">“한강을 차지하라!”</p>
          </div>
          <div class="curr">
            <h3 class="curr-title">고려시대</h3>
            <p class="curr-q">“최고의 외교술, 금속활자, 코리아(Korea)!”</p>
          </div>
          <div class="curr">
            <h3 class="curr-title">조선시대</h3>
            <p class="curr-q">“유교의 나라, 백성을 사랑한 임금님, 우리들의 이순신!”</p>
          </div>
        </div>

        <div class="wide-note">한 번으로 끝나지 않는, 이어지는 역사 수업</div>
      </div>
    </section>

    <section class="section" id="instructor">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">강사 이력</h2>
        </div>

        <div class="teacher">
          <img class="teacher-logo" src="yaong-logo.png" alt="야옹 역사 강사 로고" />
          <ul class="bullets">
            <li>역사 교육 경력 10년 이상</li>
            <li>한국사능력검정시험 1급</li>
            <li>전) 궁궐문화원 선임연구원</li>
            <li>전) 라이브 뮤지엄 출강 강사</li>
            <li>현) 꿈꾸는 해치 한국사 강사</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section" id="classinfo">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">수업 안내</h2>
        </div>

        <ul class="info-list">
          <li><b>수업 시간</b> · 1회 120분</li>
          <li><b>수업 정원</b> · 4~5명 소수 정예</li>
          <li><b>대상</b> · 초등학생 (학년별 난이도 조절)</li>
        </ul>

        <div class="tiny-note">※ 장소/학년/인원에 맞춰 커리큘럼을 조정할 수 있어요.</div>
      </div>
    </section>

    <section class="section" id="review">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">생생한 후기</h2>
        </div>

        <div class="gallery">
          <button class="thumb" type="button" data-gallery="review" data-index="0" aria-label="후기 이미지 확대 보기">
            <img src="review.jpg" alt="수업 후기 이미지" loading="lazy" />
          </button>
        </div>
      </div>
    </section>

    <section class="section" id="photos">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">활동 사진</h2>
        </div>

        <div class="gallery gallery--grid">
          <button class="thumb" type="button" data-gallery="photos" data-index="0" aria-label="활동 사진 1 확대 보기">
            <img src="photo1.jpg" alt="활동 사진 1" loading="lazy" />
          </button>
          <button class="thumb" type="button" data-gallery="photos" data-index="1" aria-label="활동 사진 2 확대 보기">
            <img src="photo2.jpg" alt="활동 사진 2" loading="lazy" />
          </button>
          <button class="thumb" type="button" data-gallery="photos" data-index="2" aria-label="활동 사진 3 확대 보기">
            <img src="photo3.jpg" alt="활동 사진 3" loading="lazy" />
          </button>
          <button class="thumb" type="button" data-gallery="photos" data-index="3" aria-label="활동 사진 4 확대 보기">
            <img src="photo4.jpg" alt="활동 사진 4" loading="lazy" />
          </button>
          <button class="thumb" type="button" data-gallery="photos" data-index="4" aria-label="활동 사진 5 확대 보기">
            <img src="photo5.jpg" alt="활동 사진 5" loading="lazy" />
          </button>
        </div>
      </div>
    </section>

    <section class="section" id="contact">
      <div class="wrap">
        <div class="sec-head">
          <div class="sec-icon">🐾</div>
          <h2 class="sec-title">수업 문의</h2>
        </div>
        <p class="sec-sub">궁금한 점이 있다면 언제든 편하게 문의 주세요.</p>

        <form class="form" id="contactForm" autocomplete="on">
          <label class="field">
            <span class="label">보호자 이름</span>
            <input type="text" name="parent" placeholder="예) 홍길동" />
          </label>

          <label class="field">
            <span class="label">휴대폰 번호</span>
            <input type="tel" name="phone" placeholder="예) 010-1234-5678" />
          </label>

          <label class="field">
            <span class="label">인원</span>
            <input type="text" name="people" placeholder="예) 4~5명" />
          </label>

          <label class="field">
            <span class="label">희망 장소/일정</span>
            <input type="text" name="schedule" placeholder="예) 중앙박물관 / 2월 주말" />
          </label>

          <label class="field">
            <span class="label">문의 내용</span>
            <textarea name="message" rows="5" placeholder="학년, 관심 주제, 궁금한 점을 적어주세요."></textarea>
          </label>

          <div class="contact-actions">
            <button class="btn btn--mint" type="button" id="mailBtn">메일로 문의하기</button>
            <a class="btn btn--ig" href="https://instagram.com/yaong_history" target="_blank" rel="noopener">
              <span class="ig-mark">⌁</span>@yaong_history
            </a>
          </div>
        </form>
      </div>
    </section>

    <footer class="footer">
      <div class="wrap footer-inner">
        <div class="footer-title">야옹 역사</div>
        <div class="footer-sub">초등 현장 한국사 수업</div>
        <div class="footer-copy">© Yaong History</div>
      </div>
    </footer>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>

    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="이미지 크게 보기">
      <div class="modal-top">
        <div class="modal-count" id="modalCount">1/1</div>
        <button class="modal-close" type="button" id="modalClose" aria-label="닫기">×</button>
      </div>

      <div class="modal-stage">
        <button class="nav" type="button" id="prevBtn" aria-label="이전">‹</button>

        <div class="zoom-wrap" id="zoomWrap">
          <img id="modalImg" alt="확대 이미지" />
        </div>

        <button class="nav" type="button" id="nextBtn" aria-label="다음">›</button>
      </div>

      <div class="modal-hint">핀치(두 손가락)로 확대/축소 · 한 손가락으로 이동 · 더블탭으로 초기화</div>
    </div>
  </div>

  <script>
    (function () {
      const header = document.querySelector(".site-header");

      function getHeaderOffset() {
        const h = header ? header.getBoundingClientRect().height : 0;
        return Math.ceil(h + 10);
      }

      function smoothScrollTo(el) {
        const y = window.scrollY + el.getBoundingClientRect().top - getHeaderOffset();
        window.scrollTo({ top: y, behavior: "smooth" });
      }

      document.querySelectorAll("[data-scroll]").forEach(a => {
        a.addEventListener("click", (e) => {
          const href = a.getAttribute("href") || "";
          if (!href.startsWith("#")) return;
          const target = document.querySelector(href);
          if (!target) return;
          e.preventDefault();
          smoothScrollTo(target);
        }, { passive: false });
      });

      // Mail
      const mailBtn = document.getElementById("mailBtn");
      const form = document.getElementById("contactForm");
      mailBtn.addEventListener("click", () => {
        const fd = new FormData(form);
        const parent = (fd.get("parent") || "").toString().trim();
        const phone = (fd.get("phone") || "").toString().trim();
        const people = (fd.get("people") || "").toString().trim();
        const schedule = (fd.get("schedule") || "").toString().trim();
        const message = (fd.get("message") || "").toString().trim();

        const subject = encodeURIComponent("야옹 역사 수업 문의");
        const bodyLines = [
          `보호자 이름: ${parent}`,
          `휴대폰 번호: ${phone}`,
          `인원: ${people}`,
          `희망 장소/일정: ${schedule}`,
          ``,
          `문의 내용:`,
          `${message}`
        ];
        const body = encodeURIComponent(bodyLines.join("\n"));
        location.href = `mailto:yaonghistory@gmail.com?subject=${subject}&body=${body}`;
      });

      // Modal galleries
      const galleries = {
        review: ["review.jpg"],
        photos: ["photo1.jpg", "photo2.jpg", "photo3.jpg", "photo4.jpg", "photo5.jpg"]
      };

      const modal = document.getElementById("modal");
      const modalImg = document.getElementById("modalImg");
      const modalCount = document.getElementById("modalCount");
      const modalClose = document.getElementById("modalClose");
      const modalBackdrop = document.getElementById("modalBackdrop");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const zoomWrap = document.getElementById("zoomWrap");

      let currentGalleryKey = "review";
      let currentIndex = 0;

      // Scroll lock (iOS 안정)
      let scrollYBefore = 0;
      function lockScroll() {
        scrollYBefore = window.scrollY || document.documentElement.scrollTop || 0;
        document.documentElement.classList.add("modal-lock");
        document.body.classList.add("modal-lock");
        document.body.style.top = `-${scrollYBefore}px`;
      }
      function unlockScroll() {
        document.documentElement.classList.remove("modal-lock");
        document.body.classList.remove("modal-lock");
        const top = document.body.style.top;
        document.body.style.top = "";
        const y = top ? Math.abs(parseInt(top, 10)) : scrollYBefore;
        window.scrollTo(0, y || 0);
      }

      function openModal(key, index) {
        currentGalleryKey = key;
        currentIndex = index;

        modal.classList.add("is-open");
        modal.setAttribute("aria-hidden", "false");
        lockScroll();

        setImage();
        resetZoom(true);
      }

      function closeModal() {
        modal.classList.remove("is-open");
        modal.setAttribute("aria-hidden", "true");
        unlockScroll();
        resetZoom(true);
      }

      function setImage() {
        const list = galleries[currentGalleryKey] || [];
        const total = list.length;

        const src = list[currentIndex] || "";
        modalImg.src = src;

        modalCount.textContent = `${currentIndex + 1}/${total}`;

        // 1장일 때는 화살표 비활성
        const enableNav = total > 1;
        prevBtn.disabled = !enableNav;
        nextBtn.disabled = !enableNav;
        prevBtn.style.visibility = enableNav ? "visible" : "hidden";
        nextBtn.style.visibility = enableNav ? "visible" : "hidden";
      }

      function prev() {
        const list = galleries[currentGalleryKey] || [];
        if (list.length <= 1) return;
        currentIndex = (currentIndex - 1 + list.length) % list.length;
        setImage();
        resetZoom(true);
      }
      function next() {
        const list = galleries[currentGalleryKey] || [];
        if (list.length <= 1) return;
        currentIndex = (currentIndex + 1) % list.length;
        setImage();
        resetZoom(true);
      }

      // Click thumbnails
      document.querySelectorAll(".thumb[data-gallery]").forEach(btn => {
        btn.addEventListener("click", () => {
          const key = btn.getAttribute("data-gallery");
          const idx = parseInt(btn.getAttribute("data-index") || "0", 10);
          openModal(key, isNaN(idx) ? 0 : idx);
        });
      });

      // Close handlers (X가 안 먹는 문제: 캡처 단계로 확실히 받기)
      modalClose.addEventListener("click", (e) => { e.preventDefault(); e.stopPropagation(); closeModal(); }, true);
      modalBackdrop.addEventListener("click", (e) => { e.preventDefault(); closeModal(); }, true);
      document.addEventListener("keydown", (e) => {
        if (!modal.classList.contains("is-open")) return;
        if (e.key === "Escape") closeModal();
        if (e.key === "ArrowLeft") prev();
        if (e.key === "ArrowRight") next();
      });

      prevBtn.addEventListener("click", (e) => { e.preventDefault(); prev(); });
      nextBtn.addEventListener("click", (e) => { e.preventDefault(); next(); });

      // =========================
      // Pinch Zoom + Pan (고정 유지)
      // =========================
      let scale = 1;
      let tx = 0, ty = 0;

      let isPanning = false;
      let panStartX = 0, panStartY = 0;

      let isPinching = false;
      let pinchStartDist = 0;
      let pinchStartScale = 1;

      function applyTransform() {
        modalImg.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
      }

      function resetZoom(hard) {
        if (hard) {
          scale = 1;
          tx = 0; ty = 0;
          applyTransform();
        }
      }

      function clampPan() {
        // 너무 멀리 안 나가게 간단 클램프 (뷰포트 기준)
        const rect = zoomWrap.getBoundingClientRect();
        const maxX = rect.width * (scale - 1) * 0.5;
        const maxY = rect.height * (scale - 1) * 0.5;

        tx = Math.max(-maxX, Math.min(maxX, tx));
        ty = Math.max(-maxY, Math.min(maxY, ty));
      }

      function distance(t1, t2) {
        const dx = t1.clientX - t2.clientX;
        const dy = t1.clientY - t2.clientY;
        return Math.hypot(dx, dy);
      }

      function onTouchStart(e) {
        if (!modal.classList.contains("is-open")) return;

        if (e.touches.length === 2) {
          isPinching = true;
          isPanning = false;
          pinchStartDist = distance(e.touches[0], e.touches[1]);
          pinchStartScale = scale;
          e.preventDefault();
          return;
        }

        if (e.touches.length === 1) {
          // scale>1일 때만 패닝
          isPanning = scale > 1.01;
          if (isPanning) {
            panStartX = e.touches[0].clientX - tx;
            panStartY = e.touches[0].clientY - ty;
            e.preventDefault();
          }
        }
      }

      function onTouchMove(e) {
        if (!modal.classList.contains("is-open")) return;

        if (isPinching && e.touches.length === 2) {
          const dist = distance(e.touches[0], e.touches[1]);
          const ratio = dist / (pinchStartDist || dist);
          scale = Math.max(1, Math.min(5, pinchStartScale * ratio));
          clampPan();
          applyTransform();
          e.preventDefault();
          return;
        }

        if (isPanning && e.touches.length === 1) {
          tx = e.touches[0].clientX - panStartX;
          ty = e.touches[0].clientY - panStartY;
          clampPan();
          applyTransform();
          e.preventDefault();
        }
      }

      function onTouchEnd(e) {
        // 핵심: 손을 떼도 원래대로 "돌아가지 않게" (값 유지)
        if (e.touches.length < 2) isPinching = false;
        if (e.touches.length === 0) isPanning = false;
      }

      // 더블탭으로 초기화
      let lastTap = 0;
      function onTap(e) {
        const now = Date.now();
        if (now - lastTap < 280) {
          resetZoom(true);
          lastTap = 0;
          return;
        }
        lastTap = now;
      }

      // iOS 인앱에서는 default pinch가 방해 → touch-action none + preventDefault로 처리
      zoomWrap.addEventListener("touchstart", onTouchStart, { passive: false });
      zoomWrap.addEventListener("touchmove", onTouchMove, { passive: false });
      zoomWrap.addEventListener("touchend", onTouchEnd, { passive: true });
      zoomWrap.addEventListener("touchcancel", onTouchEnd, { passive: true });
      zoomWrap.addEventListener("click", onTap, { passive: true });

      // Swipe for next/prev (scale==1일 때만)
      let swipeX = 0, swipeY = 0;
      zoomWrap.addEventListener("touchstart", (e) => {
        if (!modal.classList.contains("is-open")) return;
        if (e.touches.length !== 1) return;
        swipeX = e.touches[0].clientX;
        swipeY = e.touches[0].clientY;
      }, { passive: true });

      zoomWrap.addEventListener("touchend", (e) => {
        if (!modal.classList.contains("is-open")) return;
        const list = galleries[currentGalleryKey] || [];
        if (list.length <= 1) return;
        if (scale > 1.01) return; // 확대 중엔 스와이프 페이지 전환 방지

        const touch = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0] : null;
        if (!touch) return;

        const dx = touch.clientX - swipeX;
        const dy = touch.clientY - swipeY;

        if (Math.abs(dx) > 55 && Math.abs(dy) < 40) {
          if (dx < 0) next();
          else prev();
        }
      }, { passive: true });

      // iOS 사파리에서 이미지 로딩 후 transform 적용 안정
      modalImg.addEventListener("load", () => {
        applyTransform();
      });
    })();
  </script>
</body>
</html>